{"id":"001.1","severity":"error","description":"Scanner must not access DataAPI internals","scope":"modules/scanner/","check":"rg \"data_api\\.manager\\.\" modules/scanner/ --glob \"*.py\"","expect":"zero_results","fix":"Use DataAPI public methods (get_latest_bars_bulk, get_bars_bulk, store_bars, close)"}
{"id":"001.2","severity":"error","description":"CLI must not access DataManager internals","scope":"modules/data/cli/","check":"rg \"\\.manager\\.\" modules/data/cli/ --glob \"*.py\"","expect":"zero_results","fix":"Use DataAPI public methods (get_registered_symbols, register_symbol, get_data_availability, etc.)"}
{"id":"001.3","severity":"error","description":"No direct ProviderRegistry usage outside data module core","scope":"modules/ (excluding modules/data/core/)","check":"rg \"ProviderRegistry\\(\\)\" modules/ --glob \"*.py\" | rg -v \"modules/data/core/\"","expect":"zero_results","fix":"Use DataAPI methods instead of instantiating ProviderRegistry directly"}
{"id":"001.4","severity":"error","description":"No direct metadata Session usage outside data module core","scope":"modules/ (excluding modules/data/core/, modules/data/storage/)","check":"rg \"metadata\\.Session\\(\\)\" modules/ --glob \"*.py\" | rg -v \"modules/data/(core|storage)/\"","expect":"zero_results","fix":"Use DataAPI methods (get_registered_symbols, get_data_availability, register_symbol, unregister_symbol)"}
{"id":"001.5","severity":"error","description":"No direct cache access outside data module core","scope":"modules/ (excluding modules/data/core/)","check":"rg \"\\.manager\\.cache\\b\" modules/ --glob \"*.py\" | rg -v \"modules/data/core/\"","expect":"zero_results","fix":"Use DataAPI methods (get_bars with cache_only=True, store_bars, get_bars_bulk)"}
{"id":"001.6","severity":"error","description":"Parquet manager must not access DataAPI internals","scope":"modules/data/storage/parquet_manager.py","check":"rg \"\\.manager\\.\" modules/data/storage/parquet_manager.py","expect":"zero_results","fix":"Use DataAPI.close() instead of data_api.manager.providers.close_all()"}
{"id":"001.7","severity":"error","description":"Backtest modules must not use providers directly","scope":"modules/backtest/","check":"rg \"ProviderRegistry\\(\\)|\\.manager\\.providers\\.\" modules/backtest/ --glob \"*.py\"","expect":"zero_results","fix":"Use DataAPI.get_bars() or DataAPI.get_bars_detailed()"}
{"id":"001.8","severity":"error","description":"Execution modules must not use providers directly","scope":"modules/execution/","check":"rg \"ProviderRegistry\\(\\)|\\.manager\\.providers\\.\" modules/execution/ --glob \"*.py\"","expect":"zero_results","fix":"Use DataAPI.get_bars() or DataAPI.get_latest_bar()"}
{"id":"001.9","severity":"warning","description":"__init__.py files should be minimal (imports and __all__ only)","scope":"modules/**/__init__.py","check":"rg \"^(class |def [^_])\" modules/ --glob \"__init__.py\"","expect":"zero_results","fix":"Move logic to dedicated modules, keep __init__.py to re-exports only"}
{"id":"001.10","severity":"error","description":"No providers.close_all() calls outside data module core","scope":"modules/ (excluding modules/data/core/)","check":"rg \"providers\\.close_all\\(\\)\" modules/ --glob \"*.py\" | rg -v \"modules/data/core/\"","expect":"zero_results","fix":"Use await data.close() or await data_api.close()"}
