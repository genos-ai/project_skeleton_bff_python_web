{"id":"002.1","severity":"error","description":"Entry scripts must support --debug and --verbose flags","scope":"scanner.py, data.py, backtest.py, regime.py, trade.py, scheduler.py, signals.py","check":"for f in scanner.py data.py backtest.py regime.py trade.py scheduler.py signals.py; do rg -q \"debug\" \"$f\" && rg -q \"verbose\" \"$f\" || echo \"MISSING: $f\"; done","expect":"zero_results","fix":"Add --debug (logging.DEBUG) and --verbose (logging.INFO) options to all entry scripts"}
{"id":"002.2","severity":"error","description":"No hardcoded host/port values in module code","scope":"modules/**/*.py","check":"rg \"(localhost|127\\.0\\.0\\.1|:5432|:8086|:6379)\" modules/ --glob \"*.py\" | rg -v \"(settings|config|test_|mock|#|default)\"","expect":"zero_results","fix":"Move hardcoded values to config/settings.yaml or config/.env"}
{"id":"002.3","severity":"error","description":"Python files must not exceed 500 lines","scope":"modules/**/*.py, scripts/**/*.py, config/**/*.py","check":"find modules/ scripts/ config/ -name \"*.py\" -exec sh -c 'lines=$(wc -l < \"$1\"); if [ \"$lines\" -gt 500 ]; then echo \"$1: $lines lines\"; fi' _ {} \\;","expect":"zero_results","fix":"Refactor into smaller modules with clear single responsibilities. Target ~400 lines average."}
{"id":"002.4","severity":"warning","description":"No bare except clauses","scope":"modules/**/*.py","check":"rg \"^\\s*except\\s*:\" modules/ --glob \"*.py\"","expect":"zero_results","fix":"Catch specific exceptions or use except Exception as e: with logging"}
{"id":"002.5","severity":"warning","description":"All public classes must have docstrings","scope":"modules/**/*.py","check":"rg -U \"^class \\w+.*:\\n\\s*[^\\\"']\" modules/ --glob \"*.py\" --multiline | head -10","expect":"zero_results","fix":"Add Google-style docstrings to all public classes"}
{"id":"002.6","severity":"error","description":"Async resources must have cleanup in finally blocks","scope":"modules/**/*.py","check":"rg \"aiohttp\\.ClientSession\\(\\)\" modules/ --glob \"*.py\" -l | xargs -I{} sh -c 'rg -q \"finally\" \"{}\" || echo \"MISSING CLEANUP: {}\"'","expect":"zero_results","fix":"Wrap async resource usage in try/finally with cleanup in finally block"}
{"id":"002.7","severity":"error","description":"No hardcoded timeouts, batch sizes, or thresholds â€” use config","scope":"modules/**/*.py (excluding test_*, __init__.py)","check":"rg \"(timeout|batch_size|max_retries|sleep\\()\\s*=\\s*\\d\" modules/ --glob \"*.py\" | rg -v \"(settings\\.|config\\.|self\\.|_factory|default_factory|Field\\(|test_|conftest|# from config)\" | rg -v \"__init__\\.py\" | head -20","expect":"zero_results","fix":"Move hardcoded timeouts, batch sizes, retry counts, and thresholds to config/settings.yaml and read via settings object"}
